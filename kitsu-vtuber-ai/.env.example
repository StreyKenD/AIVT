# Most service defaults now live in config/kitsu.yaml. Use these variables for
# secrets or temporary overrides. Set KITSU_CONFIG_FILE to use a custom path.
# KITSU_CONFIG_FILE=config/kitsu.yaml

# Core runtime --------------------------------------------------------------
PYTHONUTF8=1
LOG_LEVEL=INFO
KITSU_LOG_ROOT=logs

# Orchestrator --------------------------------------------------------------
ORCH_HOST=127.0.0.1
ORCH_PORT=8000
ORCH_CORS_ALLOW_ORIGINS=http://localhost:5173,http://127.0.0.1:5173
TELEMETRY_API_URL=http://127.0.0.1:8001
TELEMETRY_API_KEY=
ORCHESTRATOR_URL=http://127.0.0.1:8000
ORCHESTRATOR_API_KEY=
SAFETY_MODE=family
RESTORE_CONTEXT=false
GPU_METRICS_INTERVAL_SECONDS=30

# Control panel backend -------------------------------------------------
CONTROL_PANEL_HOST=127.0.0.1
CONTROL_PANEL_PORT=8100
ORCHESTRATOR_BASE_URL=http://127.0.0.1:8000
TELEMETRY_BASE_URL=http://127.0.0.1:8001

# Automatic Speech Recognition (ASR) ---------------------------------------
# ASR_BACKEND=sherpa  # uncomment to switch to Sherpa-ONNX (requires config/kitsu.yaml paths)
# ASR_SHERPA_TOKENS=
# ASR_SHERPA_ENCODER=
# ASR_SHERPA_DECODER=
# ASR_SHERPA_JOINER=
ASR_MODEL=small.en
ASR_VAD=webrtc
ASR_PARTIAL_INTERVAL_MS=200
ASR_SAMPLE_RATE=16000
ASR_FRAME_MS=20
ASR_SILENCE_MS=400
# Set this to the numeric identifier returned by `poetry run python -m apps.asr_worker.devices`
ASR_INPUT_DEVICE=
ASR_FAKE_AUDIO=0
ASR_DEVICE=cuda

# Policy / LLM --------------------------------------------------------------
POLICY_BACKEND=ollama  # ollama | openai | local
OLLAMA_URL=http://localhost:11434
LLM_MODEL_NAME=mixtral:8x7b-instruct-q4_K_M
POLICY_FAMILY_FRIENDLY=1
POLICY_URL=http://127.0.0.1:8081
POLICY_TIMEOUT_SECONDS=40
OPENAI_MODEL=gpt-4o-mini
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_TIMEOUT_SECONDS=60
OPENAI_API_KEY_ENV=OPENAI_API_KEY
# Set OPENAI_API_KEY when using the OpenAI backend.
OPENAI_API_KEY=
LOCAL_LLM_ENGINE=transformers
LOCAL_LLM_MODEL_PATH=
LOCAL_LLM_TOKENIZER_PATH=
LOCAL_LLM_DEVICE=auto
LOCAL_LLM_MAX_NEW_TOKENS=512
LOCAL_LLM_TEMPERATURE=0.7

# Text-to-Speech ------------------------------------------------------------
TTS_BACKEND=auto
TTS_FALLBACKS=piper
TTS_CACHE_DIR=artifacts/tts_cache
TTS_MODEL_NAME=tts_models/en/vctk/vits
TTS_DEFAULT_SPEAKER=
TTS_SPEAKER_MAP=
PIPER_PATH=piper
PIPER_MODEL=
PIPER_CONFIG=
PIPER_DEFAULT_SPEAKER=
PIPER_SPEAKER_MAP=
BARK_VOICE_PRESET=v2/en_speaker_9
BARK_HISTORY_PROMPT=
BARK_TEXT_TEMPERATURE=0.7
BARK_WAVEFORM_TEMPERATURE=0.7
BARK_SPEAKER_PROMPTS=
XTTS_MODEL_NAME=tts_models/multilingual/multi-dataset/xtts_v2
XTTS_SPEAKER_WAV=
XTTS_SPEAKER_NAME=
XTTS_LANGUAGE=en
XTTS_SPEAKERS=
XTTS_LANGUAGE_OVERRIDES=
TTS_HOST=0.0.0.0
TTS_PORT=8070
TTS_API_URL=http://127.0.0.1:8070
TTS_TIMEOUT_SECONDS=60

# Persona ---------------------------------------------------------------
PERSONA_DEFAULT=default
PERSONA_PRESETS_FILE=

# Memory ----------------------------------------------------------------
MEMORY_BUFFER_SIZE=40
MEMORY_SUMMARY_INTERVAL=6
MEMORY_HISTORY_PATH=data/memory_history.json

# Twitch integration --------------------------------------------------------
TWITCH_CHANNEL=
TWITCH_OAUTH_TOKEN=
TWITCH_BOT_NICK=kitsu-bot
TWITCH_DEFAULT_SCENE=Just Chatting
TWITCH_CLIENT_ID=
TWITCH_CLIENT_SECRET=
TWITCH_REFRESH_TOKEN=

# OBS controller ------------------------------------------------------------
OBS_WS_URL=ws://127.0.0.1:4455
OBS_WS_PASSWORD=
OBS_SCENES=Intro,Just Chatting,Gameplay
OBS_PANIC_FILTER=HardMute

# VTube Studio --------------------------------------------------------------
VTS_URL=ws://127.0.0.1:8001
VTS_AUTH_TOKEN=
VTS_PLUGIN_NAME=Kitsu.exe Controller
VTS_DEVELOPER=Kitsu.exe

# Memory / moderation -------------------------------------------------------
MEMORY_DB_PATH=./memory.sqlite3
MODERATION_STRICT=0

# QA / soak harness ---------------------------------------------------------
SOAK_POLICY_URL=http://127.0.0.1:8081
SOAK_TELEMETRY_URL=http://127.0.0.1:8001
SOAK_DURATION_MINUTES=120
SOAK_TURN_INTERVAL_SECONDS=15
SOAK_WARMUP_TURNS=3
SOAK_LOG_LEVEL=INFO
